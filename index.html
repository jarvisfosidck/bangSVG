<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Untitled Document</title>
</head>

<body>


<?xml version="1.0" encoding="utf-8"?>
<svg version="1.1" id="bangSVG" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 792 612" enable-background="new 0 0 792 612" xml:space="preserve">
<g>
	<rect x="64.3" y="93" fill="#FFFFFF" stroke="#000000" stroke-miterlimit="10" width="289.6" height="265.9"/>
	<g>
		<g>
			<g>
				<polygon fill="#FFFFFF" points="516,259.4 252.3,259.4 252.3,546.9 589.5,546.9 589.5,354.5 516,354.5 				"/>
			</g>
			<g>
				<polygon fill="none" stroke="#000000" stroke-miterlimit="10" points="516,259.4 252.3,259.4 252.3,546.9 589.5,546.9 
					589.5,354.5 516,354.5 				"/>
			</g>
		</g>
		<g>
			<g>
				<polygon fill="#FFFFFF" points="725.7,166.4 516,166.4 516,259.4 516,354.5 589.5,354.5 725.7,354.5 				"/>
			</g>
			<g>
				<polygon fill="none" stroke="#000000" stroke-miterlimit="10" points="725.7,166.4 516,166.4 516,259.4 516,354.5 589.5,354.5 
					725.7,354.5 				"/>
			</g>
		</g>
	</g>
</g>
<g id="logo_fill">
	<polyline fill="#53C2BF" points="135.8,0 135.8,267.9 203.7,213.4 135.8,0 	"/>
	<g>
		<polygon fill="#53C2BF" points="135.8,0 203.7,213.4 271.7,213.4 		"/>
	</g>
	<polyline fill="#53C2BF" points="135.8,0 135.8,267.9 67.9,213.4 135.8,0 	"/>
	<g>
		<polygon fill="#53C2BF" points="135.8,0 67.9,213.4 0,213.4 		"/>
	</g>
</g>
<g id="logo_outline">
	<polyline fill="#53C2BF" points="135.8,0 135.8,267.9 203.7,213.4 135.8,0 	"/>
	<g>
		<polygon fill="#53C2BF" points="135.8,0 203.7,213.4 271.7,213.4 		"/>
	</g>
	<polyline fill="#53C2BF" points="135.8,0 135.8,267.9 67.9,213.4 135.8,0 	"/>
	<g>
		<polygon fill="#53C2BF" points="135.8,0 67.9,213.4 0,213.4 		"/>
	</g>
</g>

</svg>




<script type="text/javascript">

function _(id) {
  return document.getElementById(id);
}
function _circ(svg,attrs) {
	var c = document.createElementNS(xmlns,"circle")
	for (var a in attrs) {
		c.setAttributeNS(null, a,attrs[a]);	
	}
	return c;
}



function _ppline() {
	prettyPoints.push(prettyPoints[0]);
	var p = document.createElementNS(xmlns,"polyline")
	,attrs = {
		'stroke' : '#31da24'
		,'points' : prettyPoints //closes the shape
		,'fill' : "#ededed"
		,'fill-opacity' : 0.5
		,'stroke-width' : 2
	}
	for (var a in attrs) {
		p.setAttributeNS(null, a,attrs[a]);	
	}
	console.log(p);
	svg.appendChild(p);
	return p;
}
	
	
//	R=SVGDoc.createElementNS(xmlns,"rect")
//SVGRoot.appendChild(R)
//SVGDoc.getElementById(id)
		

var svg = _('bangSVG')
,pointsArray = []
,prettyPoints = []
,xmlns="http://www.w3.org/2000/svg"
,c = svg.getElementsByTagNameNS(xmlns,'polygon')
,pl = svg.getElementsByTagNameNS(xmlns,'polyline')
,dots
,prettyLine = function() {
		
		line = document.createElementNS(xmlns,"circle")
		,update = function() {
		
			//do stuff here
			
		}
	
	
	}
;

function getPoints(c) {
	for(var i = 0,len=c.length; i < len; i++) {
		dots = c[i].getAttribute('points').split(" ");
		for (var d in dots) {
			var pp = dots[d].replace(/[^.,0-9]/g,"");
			if (pointsArray.indexOf(pp) === -1 && pp != "") {
				pointsArray.push(pp);
			}
		}
	}
	
}
getPoints(c);getPoints(pl);
var params = {
	'fill' : 'red'
	,'stroke' : '#da2424'
	,'cx' : 40
	,'cy' : 40
	,'r' : 8
	
}

for (var p in pointsArray) {
	var xy = pointsArray[p].split(",");
	params.cx = xy[0];
	params.cy = xy[1];
	var o = _circ(svg,params);
	o.addEventListener("click",setPrettyPoints);
	svg.appendChild(o);
}

function setPrettyPoints(evt) {
	var c = evt.target,
	pair = c.getAttribute('cx') + "," + c.getAttribute('cy');
	prettyPoints.push(pair);
	var params = {
	'fill' : 'yellow'
	,'stroke' : '#da2424'
	,'cx' : c.getAttribute('cx')
	,'cy' : c.getAttribute('cy')
	,'r' : 3
	
	}
	var o = _circ(svg,params);
	svg.appendChild(o);
}


function updatePrettyLine() {




}


document.getElementsByTagName('body')[0].addEventListener("dblclick", _ppline);







//grab all the svg line, polyline, polygon elements

//find all the end points

//make them into cool shapes and colors





















</script>

</body>
</html>
